# Research: APIリクエストUI

**Date**: 2025-11-08
**Feature**: 001-streamlit-api-ui

## Decisions

### 1) 対象範囲 = 本プロジェクトAPI限定
- Decision: 本UIは image-saver プロジェクトのAPIエンドポイントのみ対象
- Rationale: セキュリティ/説明容易性/入力項目簡素化（ベースURL固定化が可能）
- Alternatives:
  - 任意外部API可: 汎用性は高いがCORS/認証/責務が増し複雑化
  - ホワイトリスト許可: 管理コスト・運用ルールが必要

### 2) 永続化 = ローカル端末に期限なし保存
- Decision: ベースURL・共通ヘッダー・タイムアウト等の接続設定はローカルに永続化（ユーザーがリセット可能）
- Rationale: 実務の再利用性を最大化。UI再起動後も同設定で即試験できる
- Alternatives:
  - セッションのみ: 安全だが毎回の再入力負担が大きい
  - 期限付き: 折衷だが期限管理のUX/実装が増える

### 3) 配置前提 = 同一オリジン
- Decision: UIとAPIは同一オリジンで提供（CORS/プロキシ不要）
- Rationale: 実装・運用を簡素化し、学習コストやエラー要因を低減
- Alternatives:
  - 別オリジン直呼び: CORS設定・トークン運搬の複雑さ
  - プロキシ経由: 追加のバックエンドや設定・監視コスト

## Best Practices & Notes
- 機微情報（トークン等）は入力時にマスク表示。保存時も暗号化/マスク（可能なら）
- JSON編集はフォーマット/バリデーション補助（整形ボタン、エラー箇所ハイライト）
- 大きなレスポンスは折り畳み・検索・コピー機能で可読性を担保
- エラーは分類（入力エラー/接続エラー/サーバーエラー）して対処のヒントを併記
- 監査のために画面内の「履歴（要約のみ）」を保持（ページを離れると消える）
